(this["webpackJsonpnetflix-settling"]=this["webpackJsonpnetflix-settling"]||[]).push([[0],{42:function(e,t,n){e.exports=n(56)},47:function(e,t,n){},48:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),i=n.n(o),s=(n(47),n(48),n(6)),l=n(7),c=n(9),u=n(8),d=[{id:"pl",name:"Polish",text:"PL"},{id:"en",name:"English",text:"EN"}],m={pl:{title:"Rozliczanie Netflix'a",saveButton:"Zapisz Dane",exitButton:"Zamknij Edytor",monthlyPayment:"Miesi\u0119czna Op\u0142ata",monthAmount:"Ilo\u015b\u0107 Miesi\u0119cy",paymentSum:"Suma Op\u0142at",startedAt:"Data Rozpocz\u0119cia",peopleAmount:"Ilo\u015b\u0107 Os\xf3b",totalPaymentPerPerson:"\u0141\u0105czna Op\u0142ata Na Osob\u0119",monthlyPaymentPerPerson:"Miesi\u0119czna Op\u0142ata Na Osob\u0119",notReturnedAmount:"Ilo\u015b\u0107 Niezwr\xf3cona",returnDetails:"Szczeg\xf3\u0142y zwrot\xf3w",returned:"Zwr\xf3cono",toBeReturned:"Do zwrotu",returnDate:"Data Zwrotu",amount:"Kwota",comment:"Komentarz",summary:"Podsumowanie",save:"Zapisz",addPerson:"Dodaj Osob\u0119",removePerson:"Usu\u0144 Osob\u0119",addPersonTitle:"Kto ma teraz dost\u0119p do Netflix'a i powinien p\u0142aci\u0107?",personName:"Imi\u0119 osoby",addReturn:"Dodaj Zwrot",removeReturn:"Usu\u0144 Zwrot",showReturns:"Poka\u017c Zwroty",addReturnTitle:"Dodaj szczeg\xf3\u0142y zwrotu:",paid:"zap\u0142aci\u0142(-a)",onDay:"w dniu",forComment:"za",date:"data",addCommentTitle:"Dodaj komentarz do tego zwrotu poni\u017cej.",addCommentPlaceHolder:"Dodaj komentarz",fileChooserStartDescription:"Je\u017celi nie posiadasz pliku, to zacznij rozliczanie na nowo.",fileChooserStart:"Rozpocznij",fileChooserDragAreaText:"Przeci\u0105gnij plik tutaj albo kliknij, aby wybra\u0107 plik z listy.",fileChooserDragAreaOverlay:"Upu\u015b\u0107 plik tutaj.",actions:"Akcje",error:"B\u0142\u0105d",errorTooManyFiles:"Za du\u017co plik\xf3w zosta\u0142o wrzuconych.",errorWrongJSONFile:"Za\u0142adowany plik nie jest poprawnym plikiem JSON.",errorWrongJSONStructure:"Za\u0142adowany plik JSON ma z\u0142\u0105 struktur\u0119.",success:"Sukces",successFileLoaded:"Plik zosta\u0142 poprawnie za\u0142adowany.",successNewEditor:"Rozpocz\u0119to nowy edytor.",successAddedPerson:"Dodano now\u0105 osob\u0119.",successAddedReturn:"Dodano nowy zwrot za Netflix'a.",closedEditor:"Zamkni\u0119to edytor. Wszystkie dane zosta\u0142y usuni\u0119te.",tooltipChangeValue:"Kliknij, by zmieni\u0107 warto\u015b\u0107."},en:{title:"Netflix Settling",saveButton:"Save Data",exitButton:"Close Editor",monthlyPayment:"Monthly Payment",monthAmount:"Months Amount",paymentSum:"Overall Payment",startedAt:"Date Started",peopleAmount:"Number Of People",totalPaymentPerPerson:"Total Payment Per Person",monthlyPaymentPerPerson:"Monthly Payment Per Person",notReturnedAmount:"Not Returned Amount",returnDetails:"Returns Details",returned:"Returned",toBeReturned:"To Be Returned",returnDate:"Return Date",amount:"Amount",comment:"Comment",summary:"Summary",save:"Save",addPerson:"Add Person",removePerson:"Remove Person",addPersonTitle:"Who got access to Netflix and should be paying now?",personName:"Name",addReturn:"Add Return",removeReturn:"Remove Return",showReturns:"Show Returns",addReturnTitle:"Add return detail:",paid:"paid",onDay:"on day",forComment:"for",date:"date",addCommentTitle:"Add a comment to this return below.",addCommentPlaceHolder:"Add comment",fileChooserStartDescription:"If you don't have a file, then start settling debt from scratch.",fileChooserStart:"Start",fileChooserDragAreaText:"Drag your file here or click to choose file from the list.",fileChooserDragAreaOverlay:"Drop your file here.",actions:"Actions",error:"Error",errorTooManyFiles:"Too many files have been dragged!",errorWrongJSONFile:"Loaded file is not a correct JSON file.",errorWrongJSONStructure:"Loaded JSON file has an incorrect structure.",success:"Success",successFileLoaded:"File was loaded successfully.",successNewEditor:"Started a new editor.",successAddedPerson:"Added a new person.",successAddedReturn:"Added a new return for Netflix.",closedEditor:"Closed editor. All data was erased.",tooltipChangeValue:"Click to change value."}},p=n(10),f=n(18),h=n(38),v=n(27),g=n(31),y=n(58),E=n(20),b={isInitialized:!1,language:d[1],activeForm:{form:"",options:void 0},notifications:[],subscriptionInfo:{startDate:"2018-12-13",amount:52},people:{isLoading:!1,items:[]},returns:{isLoading:!1,items:[]}};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.people,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PERSON":return{isLoading:!1,items:[].concat(Object(g.a)(e.items),[{id:Object(y.a)(),name:t.payload.name,active:!0}])};case"EDIT_PERSON":return{isLoading:!1,items:e.items.map((function(e){return e.id===t.payload.index?Object.assign({},e,Object(v.a)({},t.payload.property,t.payload.value)):e}))};case"REMOVE_PERSON":return{isLoading:!1,items:e.items.filter((function(e){return e.id!==t.payload.index}))};case"ADD_PEOPLE":var n=t.payload.people;return{isLoading:!1,items:n};case E.a:return b.people;default:return e}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.returns,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RETURN":return{isLoading:!1,items:[].concat(Object(g.a)(e.items),[{id:Object(y.a)(),personId:t.payload.personId,date:t.payload.date,amount:t.payload.amount,comment:t.payload.comment}])};case"EDIT_RETURN":return{isLoading:!1,items:e.items.map((function(e){return e.id===t.payload.index?Object.assign({},e,Object(v.a)({},t.payload.property,t.payload.value)):e}))};case"REMOVE_RETURN":return{isLoading:!1,items:e.items.filter((function(e){return e.id!==t.payload.index}))};case"REMOVE_RETURNS_BY_PERSON":return{isLoading:!1,items:e.items.filter((function(e){return e.personId!==t.payload.index}))};case"ADD_RETURNS":return{isLoading:!1,items:t.payload.returns};case E.a:return b.returns;default:return e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.activeForm,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return t.payload;case E.a:return b.activeForm;default:return e}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.notifications,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return[].concat(Object(g.a)(e),[{id:Object(y.a)(),type:t.payload.type,message:t.payload.message,isVisible:!0}]);case"HIDE_NOTIFICATION":return e.map((function(e){return e.id===t.payload.id?Object.assign({},e,{isVisible:!1}):e}));case"REMOVE_NOTIFICATION":return e.filter((function(e){return e.id!==t.payload.id}));case E.a:return b.notifications;default:return e}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.isInitialized,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE":return t.payload.isInitialized;case E.a:return b.isInitialized;default:return e}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.language,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANGUAGE":return t.payload.language;default:return e}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.subscriptionInfo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUBSCRIPTION_INFO":return t.payload.subscriptionInfo;case"SET_START_DATE":return Object.assign({},e,{startDate:t.payload.startDate});case"SET_SUBSCRIPTION_AMOUNT":return Object.assign({},e,{amount:t.payload.amount});default:return e}}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"EXIT_APP"===t.type&&(e=Object.assign({},b,{language:e.language})),{isInitialized:I(e.isInitialized,t),language:R(e.language,t),activeForm:D(e.activeForm,t),notifications:j(e.notifications,t),subscriptionInfo:S(e.subscriptionInfo,t),people:O(e.people,t),returns:N(e.returns,t)}},P=n(39),A={key:"root",storage:n.n(P).a},T=Object(E.b)(A,C),k=Object(f.d)(T,Object(f.a)(h.a)),w=Object(E.c)(k);function x(e,t){return{type:"SET_NOTIFICATION",payload:{type:e,message:t}}}function F(e){return function(t){t({type:"HIDE_NOTIFICATION",payload:{id:e}}),setTimeout((function(){return t(function(e){return{type:"REMOVE_NOTIFICATION",payload:{id:e}}}(e))}),300)}}function z(e){return function(t){t({type:"REMOVE_PERSON",payload:{index:e}}),t(function(e){return{type:"REMOVE_RETURNS_BY_PERSON",payload:{index:e}}}(e))}}function L(e,t){return{type:"TOGGLE_FORM",payload:{form:e,options:t}}}function _(e,t){return function(n){n({type:"ADD_PEOPLE",payload:{people:e.people}}),n({type:"ADD_RETURNS",payload:{returns:e.returns}}),n({type:"SET_SUBSCRIPTION_INFO",payload:{subscriptionInfo:e.subscriptionInfo}}),n(x("success",t)),n(M())}}function M(){return{type:"INITIALIZE",payload:{isInitialized:!0}}}var U=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.handleClickOutside=function(t){e.languageRef.contains(t.target)||e.setState({isOpen:!1})},e.handleLanguageChange=function(t,n){t.preventDefault(),e.props.setLanguage(n),e.toggleLanguageList()},e.toggleLanguageList=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside,!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"language-chooser",ref:function(t){return e.languageRef=t}},r.a.createElement("div",{id:"language-chooser-current",onClick:this.toggleLanguageList},this.props.language.text),r.a.createElement("div",{id:"language-chooser-list",className:this.state.isOpen?"opened":""},d.filter((function(t){return t.id!==e.props.language.id})).map((function(t){return r.a.createElement("div",{className:"language-chooser-option","data-language":t.id,key:t.id,onClick:function(n){return e.handleLanguageChange(n,t)}},t.name)}))))}}]),n}(r.a.Component),V=Object(p.b)((function(e){return{language:e.language}}),(function(e){return{setLanguage:function(t){return e(function(e){return{type:"SET_LANGUAGE",payload:{language:e}}}(t))}}}))(U);var B=Object(p.b)((function(e){return{language:e.language}}))((function(e){return r.a.createElement(r.a.Fragment,null,m[e.language.id][e.text])})),J=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).saveData=function(t){t.preventDefault();var n=JSON.stringify({subscriptionInfo:e.props.subscriptionInfo,people:e.props.people.items,returns:e.props.returns.items}),a=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");document.body.appendChild(o),o.style="display: none",o.href=r,o.download="netflix-setttling-data.json",o.click(),window.URL.revokeObjectURL(r),o.remove()},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"menubar"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"title"},r.a.createElement("a",{href:"/"},r.a.createElement(B,{text:"title"}))),r.a.createElement("div",{className:"right"},this.props.isInitialized?r.a.createElement("button",{className:"menubar-button",onClick:this.saveData},r.a.createElement(B,{text:"saveButton"})):null,this.props.isInitialized?r.a.createElement("button",{className:"menubar-button",onClick:this.props.exit},r.a.createElement(B,{text:"exitButton"})):null,r.a.createElement(V,null))))}}]),n}(r.a.Component),Z=Object(p.b)((function(e){return{subscriptionInfo:e.subscriptionInfo,people:e.people,returns:e.returns}}),(function(e){return{exit:function(){return e((function(e){w.purge().then((function(){e({type:"EXIT_APP"}),e(x("notification","closedEditor"))}))}))}}}))(J),W=n(40),G=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(W.a,{value:this.props.children,displayType:"text",thousandSeparator:" ",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!1,suffix:" z\u0142"})}}]),n}(r.a.Component),K=n(24),Y=n(28),H={date:{mask:Date,pattern:"Y-`m-`d",blocks:{d:{mask:Y.a.MaskedRange,from:1,to:31,maxLength:2},m:{mask:Y.a.MaskedRange,from:1,to:12,maxLength:2},Y:{mask:Y.a.MaskedRange,from:1900,to:9999}},format:function(e){var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),[e.getFullYear(),n,t].join("-")},parse:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},lazy:!1},text:{mask:String,maxLength:25},number:{mask:Number,pattern:""},currency:{mask:"num z\u0142",unmask:!0,lazy:!1,blocks:{num:{mask:Number,scale:2,signed:!0,thousandsSeparator:" ",radix:",",mapToRadix:["."]}}}},X=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"tooltip"},r.a.createElement(B,{text:this.props.text}))}}]),n}(a.Component),q=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a,r;return Object(s.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({value:e})},a.onKeyDown=function(e){if("Escape"===e.key)a.setState({value:a.state.initialValue}),a.deactivateEditor();else if("Enter"===e.key){if(a.catchInvalidDate())return a.setState({value:a.state.initialValue}),void a.deactivateEditor();a.handleChangedValue(),a.deactivateEditor()}},a.onBlur=function(){if(a.catchInvalidDate())return a.setState({value:a.state.initialValue}),void a.deactivateEditor();a.handleChangedValue(),a.deactivateEditor()},a.activateEditor=function(e){e.preventDefault(),e.stopPropagation(),a.setState({activating:!0,active:!0})},a.deactivateEditor=function(){a.setState({active:!1}),setTimeout((function(){return a.setState({activating:!1})}),1)},a.handleChangedValue=function(){var e;""===a.state.value?a.setState({value:a.state.initialValue}):(e=0===a.props.type.localeCompare("number")||0===a.props.type.localeCompare("currency")?parseFloat(a.state.value):a.state.value,void 0===a.props.id&&void 0===a.props.property?a.props.onChange(e):a.props.onChange(a.props.id,a.props.property,e),a.setState({initialValue:e+"",value:e+""}))},a.catchInvalidDate=function(){return 0===a.props.type.localeCompare("date")&&!(new Date(a.state.value)instanceof Date&&!isNaN(new Date(a.state.value))&&10===a.state.value.length)},r=e.children instanceof Object?e.children.props.children:e.children,a.state={initialValue:r,value:r,activating:!1,active:!1},a.options=H[e.type],a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"property-editor",onClick:this.activateEditor,onBlur:this.onBlur,onKeyDown:this.onKeyDown},this.state.active?r.a.createElement(K.a,Object.assign({name:this.props.property,value:this.state.value+"",onAccept:function(t){return e.onChange(t)}},this.options,{autoFocus:!0,className:"input"})):r.a.createElement("div",{className:this.state.activating?"content activated":"content"},this.props.children),r.a.createElement(X,{text:"tooltipChangeValue"}))}}]),n}(r.a.Component),Q=function(e,t,n){return 12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth())+(t.getDate()>=e.getDate()&&n?1:0)},$=Object(p.b)((function(e){return{subscriptionInfo:e.subscriptionInfo,people:e.people,returns:e.returns}}),(function(e){return{setStartDate:function(t){return e(function(e){return{type:"SET_START_DATE",payload:{startDate:e}}}(t))},setSubscriptionAmount:function(t){return e(function(e){return{type:"SET_SUBSCRIPTION_AMOUNT",payload:{amount:e}}}(t))}}}))((function(e){var t=e.people.items.filter((function(e){return!0===e.active})).length+1,n=Q(new Date(e.subscriptionInfo.startDate),new Date,!0),a=n*e.subscriptionInfo.amount,o=e.returns.items.reduce((function(e,t){return e+t.amount}),0),i=[{value:r.a.createElement(q,{type:"currency",onChange:e.setSubscriptionAmount},r.a.createElement(G,null,e.subscriptionInfo.amount)),desc:"monthlyPayment"},{value:r.a.createElement(q,{type:"date",onChange:e.setStartDate},e.subscriptionInfo.startDate),desc:"startedAt"},{value:n,desc:"monthAmount"},{value:r.a.createElement(G,null,a),desc:"paymentSum"},{value:t-1,desc:"peopleAmount"},{value:r.a.createElement(G,null,a/t),desc:"totalPaymentPerPerson"},{value:r.a.createElement(G,null,e.subscriptionInfo.amount/t),desc:"monthlyPaymentPerPerson"},{value:a-o-a/t>0?r.a.createElement("span",{style:{color:"#aa0808"}},r.a.createElement(G,null,a-o-a/t)):r.a.createElement(G,null,0),desc:"notReturnedAmount"}];return r.a.createElement("div",{id:"summary"},r.a.createElement("div",{id:"summary-title"},r.a.createElement(B,{text:"summary"})),r.a.createElement("div",{id:"stats"},i.map((function(e){return r.a.createElement("div",{className:"item",key:e.desc},r.a.createElement("div",{className:"value"},e.value),r.a.createElement("div",{className:"desc"},r.a.createElement(B,{text:e.desc})))}))))})),ee=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleRemovePerson=function(t,n){t.preventDefault(),e.props.removeReturn(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("table",{className:"returns-list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(B,{text:"returnDate"})),r.a.createElement("th",null,r.a.createElement(B,{text:"amount"})),r.a.createElement("th",{className:"comment"},r.a.createElement(B,{text:"comment"})),r.a.createElement("th",null,r.a.createElement(B,{text:"actions"})))),r.a.createElement("tbody",null,this.props.returns.items.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement(q,{id:t.id,type:"date",property:"date",onChange:e.props.editReturn},t.date)),r.a.createElement("td",null,r.a.createElement(q,{id:t.id,type:"currency",property:"amount",onChange:e.props.editReturn},r.a.createElement(G,null,t.amount))),r.a.createElement("td",{className:"comment"},r.a.createElement(q,{id:t.id,type:"text",property:"comment",onChange:e.props.editReturn},t.comment)),r.a.createElement("td",{className:"actions"},r.a.createElement("button",{className:"action-button secondary",name:"removeReturn",type:"button",onClick:function(n){return e.handleRemovePerson(n,t.id)}},r.a.createElement(B,{text:"removeReturn"}))))}))))}}]),n}(r.a.Component),te=Object(p.b)((function(e,t){return{returns:{isLoading:e.returns.isLoading,items:e.returns.items.filter((function(e){return e.personId===t.personId}))}}}),(function(e){return{editReturn:function(t,n,a){return e(function(e,t,n){return{type:"EDIT_RETURN",payload:{index:e,property:t,value:n}}}(t,n,a))},removeReturn:function(t){return e(function(e){return{type:"REMOVE_RETURN",payload:{index:e}}}(t))}}}))(ee),ne=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={active:null},e.handleAddReturn=function(t,n){t.stopPropagation(),t.preventDefault(),e.props.toggleForm(t.target.name,{personId:n})},e.handleRemovePerson=function(t,n){t.stopPropagation(),t.preventDefault(),e.props.removePerson(n)},e}return Object(l.a)(n,[{key:"dropdown",value:function(e){this.setState({active:this.state.active===e?null:e})}},{key:"render",value:function(){var e=this,t=this.props.people.items.filter((function(e){return!0===e.active})).length+1,n=Q(new Date(this.props.subscriptionInfo.startDate),new Date,!0)*this.props.subscriptionInfo.amount/t;return r.a.createElement("div",{id:"detailed-returns"},r.a.createElement("div",{id:"detailed-returns-header"},r.a.createElement("div",{id:"detailed-returns-title"},r.a.createElement(B,{text:"returnDetails"})),r.a.createElement("button",{className:"add-person-button",name:"addPerson",type:"button",onClick:function(t){return e.props.toggleForm(t.target.name)}},r.a.createElement(B,{text:"addPerson"}))),r.a.createElement("table",{id:"detailed-returns-list"},r.a.createElement("thead",{id:"detailed-returns-list-header"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(B,{text:"personName"})),r.a.createElement("th",null,r.a.createElement(B,{text:"returned"})),r.a.createElement("th",null,r.a.createElement(B,{text:"toBeReturned"})),r.a.createElement("th",null,r.a.createElement(B,{text:"actions"})))),r.a.createElement("tbody",null,this.props.people.items.map((function(t){var a=e.props.returns.items.reduce((function(e,n){return t.id===n.personId?e+n.amount:e}),0),o=e.props.returns.items.filter((function(e){return e.personId===t.id})).length;return[r.a.createElement("tr",{key:t.id,onClick:function(){return e.dropdown(t.id)},className:"detailed-returns-list-row "+(o>0?"has-returns":null)},r.a.createElement("td",null,r.a.createElement(q,{id:t.id,type:"text",property:"name",onChange:e.props.editPerson},t.name)),r.a.createElement("td",null,r.a.createElement(G,null,a)),r.a.createElement("td",null,r.a.createElement(G,null,n-a)),r.a.createElement("td",{className:"actions"},r.a.createElement("button",{className:"action-button",name:"addReturn",type:"button",onClick:function(n){return e.handleAddReturn(n,t.id)}},r.a.createElement(B,{text:"addReturn"})),r.a.createElement("button",{className:"action-button secondary",name:"removePerson",type:"button",onClick:function(n){return e.handleRemovePerson(n,t.id)}},r.a.createElement(B,{text:"removePerson"})))),r.a.createElement(r.a.Fragment,{key:t.id+"-additional-info"},o>0&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"additional-info-container"},r.a.createElement("div",{className:t.id===e.state.active?"additional-info active":"additional-info"},r.a.createElement(te,{personId:t.id})))))]})))))}}]),n}(r.a.Component),ae=Object(p.b)((function(e){return{subscriptionInfo:e.subscriptionInfo,people:e.people,returns:e.returns}}),(function(e){return{toggleForm:function(t,n){return e(L(t,n))},editPerson:function(t,n,a){return e(function(e,t,n){return{type:"EDIT_PERSON",payload:{index:e,property:t,value:n}}}(t,n,a))},removePerson:function(t){return e(z(t))}}}))(ne),re=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"content"},r.a.createElement("div",{className:"wrapper"},r.a.createElement($,null),r.a.createElement(ae,null)))}}]),n}(r.a.Component),oe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleSubmit=function(t){e.props.handleCloseForm(),e.props.addPerson(e.state.value),t.preventDefault()},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"content person-form"},r.a.createElement("div",{className:"form-title"},r.a.createElement(B,{text:"addPersonTitle"})),r.a.createElement("input",{className:"form-input",type:"text",name:"personName",value:this.state.value,maxLength:25,onChange:this.handleChange}),this.state.value?r.a.createElement("button",{className:"submit-button",type:"button",onClick:this.handleSubmit},r.a.createElement(B,{text:"save"})):null)}}]),n}(r.a.Component),ie=Object(p.b)(null,(function(e){return{addPerson:function(t){return e(function(e){return function(t){t({type:"ADD_PERSON",payload:{name:e}}),t(x("success","successAddedPerson"))}}(t))}}}))(oe),se=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={personId:"",date:"",amount:"",comment:""},e.handleSubmit=function(t){e.props.handleCloseForm(),e.props.addReturn(e.props.activeForm.options.personId,e.state.date,parseFloat(e.state.amount),e.state.comment),t.preventDefault()},e.handleChange=function(t,n){e.setState(Object(v.a)({},n.el.input.name,t))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content return-form"},r.a.createElement("div",{className:"form-title"},r.a.createElement(B,{text:"addReturnTitle"})),r.a.createElement("div",{className:"form-section"},r.a.createElement("b",null,this.props.people.find((function(t){return t.id===e.props.activeForm.options.personId})).name+" ")," ",r.a.createElement(B,{text:"paid"})," ","   ",r.a.createElement(K.a,Object.assign({className:"form-input",name:"amount"},H.currency,{value:this.state.amount,onAccept:function(t,n){return e.handleChange(t,n)}})),"   "," ",r.a.createElement(B,{text:"onDay"})," ","   ",r.a.createElement(K.a,Object.assign({className:"form-input",name:"date"},H.date,{value:this.state.date,onAccept:function(t,n){return e.handleChange(t,n)}})),"   "," ",r.a.createElement(B,{text:"forComment"})," ","   ",r.a.createElement(K.a,Object.assign({className:"form-input comment",name:"comment"},H.text,{value:this.state.comment,onAccept:function(t,n){return e.handleChange(t,n)}})),"."),this.state.amount&&this.state.date&&this.state.comment?r.a.createElement("button",{className:"submit-button",type:"button",onClick:this.handleSubmit},r.a.createElement(B,{text:"save"})):null)}}]),n}(r.a.Component),le=Object(p.b)((function(e){return{activeForm:e.activeForm,startDate:e.subscriptionInfo.startDate,people:e.people.items}}),(function(e){return{addReturn:function(t,n,a,r){return e(function(e,t,n,a){return function(r){r({type:"ADD_RETURN",payload:{personId:e,date:t,amount:n,comment:a}}),r(x("success","successAddedReturn"))}}(t,n,a,r))}}}))(se),ce=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleCloseForm=function(){e.props.toggleForm("",null)},e}return Object(l.a)(n,[{key:"render",value:function(){var e={addPerson:r.a.createElement(ie,{handleCloseForm:this.handleCloseForm}),addReturn:r.a.createElement(le,{handleCloseForm:this.handleCloseForm})};return r.a.createElement("div",{id:"form-overlay",className:this.props.activeForm.form?"active":""},r.a.createElement("div",{id:"form"},this.props.activeForm.form&&e[this.props.activeForm.form],r.a.createElement("div",{className:"close",onClick:this.handleCloseForm})))}}]),n}(r.a.Component),ue=Object(p.b)((function(e){return{activeForm:e.activeForm}}),(function(e){return{toggleForm:function(t,n){return e(L(t,n))}}}))(ce),de=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleDragEnter=function(e){e.preventDefault(),e.stopPropagation(),a.dragDepth++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&a.setState({inDragArea:!0})},a.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation(),a.dragDepth--,a.dragDepth>0||a.setState({inDragArea:!1})},a.handleDragOver=function(e){e.preventDefault(),e.stopPropagation()},a.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),a.setState({inDragArea:!1}),e.dataTransfer.items&&e.dataTransfer.items.length>0&&(e.dataTransfer.items.length>1?a.props.loadFileError("errorTooManyFiles"):a.handleFile(e.dataTransfer.files[0]),e.dataTransfer.clearData(),a.dragDepth=0)},a.handleFile=function(e){var t=new FileReader;t.onload=function(e){a.parseFileResult(e.target.result)},t.readAsText(e)},a.parseFileResult=function(e){var t;try{t=JSON.parse(e)}catch(n){return void a.props.loadFileError("errorWrongJSONFile")}a.isParsedObjectInvalid(t)?a.props.loadFileError("errorWrongJSONStructure"):a.props.loadFileSuccess(t,"successFileLoaded")},a.handleStartApp=function(e){e.preventDefault(),a.props.startNew("successNewEditor")},a.isParsedObjectInvalid=function(e){return Object.keys(e).length>3||!(e.hasOwnProperty("people")&&e.hasOwnProperty("returns")&&e.hasOwnProperty("subscriptionInfo"))},a.state={inDragArea:!1},a.dragDepth=0,a.dragProps={onDragEnter:a.handleDragEnter,onDragLeave:a.handleDragLeave,onDragOver:a.handleDragOver,onDrop:a.handleDrop},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"file-loader"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",Object.assign({id:"drop-area"},this.dragProps,{className:this.state.inDragArea?"active":""}),r.a.createElement("input",{id:"file-chooser-input",type:"file",accept:".json",onChange:function(t){return e.handleFile(t.target.files[0])}}),r.a.createElement("label",{className:"drag-area-button",htmlFor:"file-chooser-input"},r.a.createElement(B,{text:"fileChooserDragAreaText"})),r.a.createElement("div",{id:"drag-area-overlay",className:this.state.inDragArea?"active":""},r.a.createElement("div",{className:"drag-area-overlay-text"},r.a.createElement(B,{text:"fileChooserDragAreaOverlay"})))),r.a.createElement("div",{id:"file-loader-start-new"},r.a.createElement("div",{className:"file-loader-text"},r.a.createElement(B,{text:"fileChooserStartDescription"})),r.a.createElement("div",{className:"file-loader-text"},r.a.createElement("button",{onClick:this.handleStartApp},r.a.createElement(B,{text:"fileChooserStart"}))))))}}]),n}(r.a.Component),me=Object(p.b)(null,(function(e){return{loadFileSuccess:function(t,n){return e(_(t,n))},loadFileError:function(t){return e(function(e){return function(t){return t(x("error",e))}}(t))},startNew:function(t){return e(function(e){return function(t){t(x("success",e)),t({type:"INITIALIZE",payload:{isInitialized:!0}})}}(t))}}}))(de),pe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={shouldAnimateMount:a.props.shouldMount},a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;!this.props.shouldMount&&e.shouldMount?setTimeout((function(){return t.setState({shouldAnimateMount:!1})}),299):this.props.shouldMount&&!e.shouldMount&&this.setState({shouldAnimateMount:!0})}},{key:"render",value:function(){return this.state.shouldAnimateMount?r.a.createElement("div",{className:this.props.shouldMount?"mount-animation":"unmount-animation"},this.props.children):null}}]),n}(r.a.Component),fe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).timer=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout((function(){return e.props.hideNotification(e.props.notification.id)}),5e3)}},{key:"componentDidUpdate",value:function(){var e=this;null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){return e.props.hideNotification(e.props.notification.id)}),5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"notification "+(null!==this.props.notification.type?this.props.notification.type:"")},r.a.createElement(B,{text:this.props.notification.message}),r.a.createElement("div",{className:"close",onClick:function(){return e.props.hideNotification(e.props.notification.id)}}))}}]),n}(r.a.Component),he=Object(p.b)(null,(function(e){return{hideNotification:function(t){return e(F(t))}}}))(fe),ve=Object(p.b)((function(e){return{notifications:e.notifications}}))((function(e){return e.notifications.length>0?r.a.createElement("div",{id:"notification-group"},e.notifications.map((function(e){return r.a.createElement(pe,{shouldMount:e.isVisible,key:e.id},r.a.createElement(he,{notification:e}))}))):null})),ge=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFormToggle=function(t){setTimeout((function(){return e.setState({activeForm:t})}),300)},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{isInitialized:this.props.isInitialized}),!this.props.isInitialized&&r.a.createElement(me,null),this.props.isInitialized&&r.a.createElement(re,null),this.props.isInitialized&&r.a.createElement(ue,{handleFormToggle:this.handleFormToggle}),r.a.createElement(ve,null))}}]),n}(r.a.Component),ye=Object(p.b)((function(e){return{isInitialized:e.isInitialized}}))(ge),Ee=n(41),be=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"})}}]),n}(r.a.Component);i.a.render(r.a.createElement(p.a,{store:k},r.a.createElement(Ee.a,{loading:r.a.createElement(be,null),persistor:w},r.a.createElement(ye,null))),document.getElementById("app"))}},[[42,1,2]]]);
//# sourceMappingURL=main.85e17d1f.chunk.js.map